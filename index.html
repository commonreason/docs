<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Common Reason | Common Reason</title>
    <meta name="description" content="Blockchain based on relational database and logic programming.">
    
    <meta name="image" content="https://img.shields.io/discord/586902457053872148.svg"><meta name="twitter:title" content="Common Reason"><meta name="twitter:description" content=""><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://img.shields.io/discord/586902457053872148.svg"><meta name="twitter:url" content="https://commonreason.dev/"><meta name="twitter:site" content="@sorpaas"><meta property="og:type" content="article"><meta property="og:title" content="Common Reason"><meta property="og:description" content=""><meta property="og:image" content="https://img.shields.io/discord/586902457053872148.svg"><meta property="og:url" content="https://commonreason.dev/"><meta property="og:site_name" content="Common Reason"><meta itemprop="name" content="Common Reason"><meta itemprop="description" content=""><meta itemprop="image" content="https://img.shields.io/discord/586902457053872148.svg">
    <link rel="preload" href="/assets/css/0.styles.d477c793.css" as="style"><link rel="preload" href="/assets/js/app.986800e3.js" as="script"><link rel="preload" href="/assets/js/2.8441a3b5.js" as="script"><link rel="preload" href="/assets/js/5.28d3f020.js" as="script"><link rel="prefetch" href="/assets/js/3.86cbd36d.js"><link rel="prefetch" href="/assets/js/4.3e6868fb.js"><link rel="prefetch" href="/assets/js/6.ec569b3e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d477c793.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">Common Reason</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/commonreason/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/commonreason/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/" class="active sidebar-link">Common Reason</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/#motivation" class="sidebar-link">Motivation</a></li><li class="sidebar-sub-header"><a href="/#basic-information" class="sidebar-link">Basic Information</a></li><li class="sidebar-sub-header"><a href="/#accounts-and-smart-contracts" class="sidebar-link">Accounts and Smart Contracts</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="common-reason"><a href="#common-reason" class="header-anchor">#</a> Common Reason</h1> <p><a href="https://discord.gg/DZbg4rZ" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/discord/586902457053872148.svg" alt="Discord"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>Common Reason</strong> is a blockchain platform with smart contracts based
on logic programming (Datalog) and relational database.</p> <h2 id="motivation"><a href="#motivation" class="header-anchor">#</a> Motivation</h2> <p>Nowadays, most smart contract platforms out in the wild treat smart
contracts as &quot;programs&quot;, storage as &quot;file systems&quot;. However, by
storing contracts as binary blob on chain, it becomes difficult to
reason about the internals of the contracts or to derive additional
functionality out of it.</p> <p><strong>Common Reason</strong> aims at trying out a different approach. Here, we
treat the whole storage as a relational database, with a reduced logic
programming engine, Datalog, built on top of it. Actions, which are
normal WebAssembly programs, operates on and modify the predicates in
the relational database, to update the state.</p> <h2 id="basic-information"><a href="#basic-information" class="header-anchor">#</a> Basic Information</h2> <p>If you are wondering, we're still in the <em>Design Phase</em> of <strong>Common
Reason</strong> blockchain. This is a hobby project, so things may take some
time to take off. In the mean time, we welcome you to join our
<a href="https://discord.gg/VbdWT6c" target="_blank" rel="noopener noreferrer">Discord<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, or leave a comment on our
Github issues, if you have any questions regarding this blockchain.</p> <p>The blockchain is most likely to be launched with Proof of Work
consensus without pre-mine.</p> <h2 id="accounts-and-smart-contracts"><a href="#accounts-and-smart-contracts" class="header-anchor">#</a> Accounts and Smart Contracts</h2> <p><strong>Common Reason</strong> blockchain uses an account-based state model. All
accounts and smart contracts in the blockchain are called
<strong>cells</strong>. Each cell contains the following information.</p> <h3 id="identifier"><a href="#identifier" class="header-anchor">#</a> Identifier</h3> <p>Atom identifier that can be used in logic predicates. For example:</p> <div class="language- extra-class"><pre class="language-text"><code>id Kitty;
</code></pre></div><p>Defines a kitty identifier. Besides user-defined identifiers, there
are two system-defined identifiers <code>User</code>, which represents either an
account or a smart contract, and <code>uint</code>, which represents unsigned
integer.</p> <h3 id="fact-relations"><a href="#fact-relations" class="header-anchor">#</a> Fact Relations</h3> <p>Relations define semantics of the data.</p> <div class="language- extra-class"><pre class="language-text"><code>fact owner(kitty: Kitty, user: User);
fact parent(parent: Kitty, child: Kitty);
</code></pre></div><p>This declares the <code>owner</code> and <code>parent</code> relationship. Using this, facts
can be defined as the actual data stored in each cell. For example,
below is a fact.</p> <div class="language- extra-class"><pre class="language-text"><code>owner(K1, U1);
owner(K2, U1);
parent(K1, K2);
</code></pre></div><p>It states that user <code>U1</code> is an owner of <code>K1</code> and <code>K2</code>, and <code>K1</code> is a
parent of <code>K2</code>.</p> <h3 id="rule-relations"><a href="#rule-relations" class="header-anchor">#</a> Rule Relations</h3> <p>Rules are built on top of facts. For example, one can say:</p> <div class="language- extra-class"><pre class="language-text"><code>rule ancestor(a: Kitty, b: Kitty);
ancestor(a, b) &lt;- parent(a, b);
ancestor(a, b), c &lt;- parent(a, c), ancestor(c, b);
</code></pre></div><p>This declares the rule <code>ancestor</code>. Ancestors are parents, or parents
of parents.</p> <h4 id="procedural-rules"><a href="#procedural-rules" class="header-anchor">#</a> Procedural Rules</h4> <p>A particular clause of the body of a rule can be a WebAssembly
binary. This allows numerical operations or negation to be
defined. Note that the parameter rules must follow Datalog definition.</p> <h3 id="actions"><a href="#actions" class="header-anchor">#</a> Actions</h3> <p>Actions are used to change facts of a cell. They are callable, if all
the predicates defined are satisfied. To resolve the predicates, the
transaction is expected to provide the proof that predicates are
satisfied. This avoids logic engine in state transition function.</p> <p>Requirements of action combining rules are written directly in
predicates. The user who make the transaction is expected to provide
all actions required in one go.</p> <p>The first parameter of an action is always the caller (as defined in
the transaction). The body of an action is a WebAssembly binary blob.</p> <div class="language- extra-class"><pre class="language-text"><code>extern coin = &lt;coin operation address&gt;;

action sell(caller, receiver: User, kitty: Kitty) where
  owner(caller, kitty),
  coin.transfer(receiver, caller, 100)
=&gt;
  -owner(caller, kitty),
  +owner(receiver, kitty);
</code></pre></div><p>The above states that owner of a kitty can sell the kitty to others,
given that there must be, at the same time, a transfer of 100 coin
from receiver to caller.</p> <h4 id="multi-party-actions"><a href="#multi-party-actions" class="header-anchor">#</a> Multi-party Actions</h4> <p>Note that the above example given is a multi-party action. The
<code>caller</code> is affected in that his/her kitty is being transferred, and
the receiver is affected in that his/her coin needs to be transferred
to the caller. As a result, the transaction will require
multi-signatures.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/commonreason/docs/edit/master/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/27/2019, 6:35:44 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.986800e3.js" defer></script><script src="/assets/js/2.8441a3b5.js" defer></script><script src="/assets/js/5.28d3f020.js" defer></script>
  </body>
</html>
